---
title: Изучение новой поддержки команды "go tool" в Go 1.24
date: 2025-02-04 20:21:00 +0500
categories: [Programming]
tags: [golang, build]
---


Go 1.24 вводит новую поддержку [«Инструментов»](https://tip.golang.org), что позволяет легко использовать инструменты (написанные на Go) как зависимости для проекта. Это может быть что угодно – от `golangci-lint` до `protoc-gen-go`.

В этой статье будут рассмотрены способы использования и ограничения.

## Основное использование 

Добавление инструмента в проект почти ничем не отличается от добавления обычной зависимости для выполнения, с дополнительным флагом `-tool`:

```bash
$ goimports # У меня еще нет goimports!
zsh: command not found: goimports
$ go get -tool golang.org/x/tools/cmd/goimports
go: added golang.org/x/mod v0.22.0
go: added golang.org/x/sync v0.10.0
go: added golang.org/x/tools v0.29.0
$ go tool goimports --help
usage: goimports [flags] [path ...]
```

Как только мы добавляем инструмент, мы можем вызвать его с помощью `go tool <имя>`.

Есть несколько других способов использования `go tool`, но команда достаточно проста:

Простой вызов go tool выведет список всех инструментов. Учтите, что некоторые из них встроены в Go, поэтому список всегда будет содержать несколько записей.

`go tool <имя>`, как показано выше, выполняет инструмент. `<имя>` может быть коротким именем или полным путём, например, `golang.org/x/tools/cmd/goimports`.

Флаг -n выведет путь к инструменту в файловой системе:

```bash 
$ go tool -n goimports
/go-build/45/45c850e978e426ca-d/goimports
```

Флаг `-modfile` ([недокументировано](https://github.com/golang/go/issues/71502)) позволяет задать, какой файл go.mod использовать. Это будет важно позже.
